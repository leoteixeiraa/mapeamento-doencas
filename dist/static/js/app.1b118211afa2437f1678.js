webpackJsonp([1],{NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")({name:"App"},o,!1,function(e){s("Pe99")},null,null).exports,i=s("/ocq"),n=s("mtWM"),l=s.n(n),c={data:()=>({address:"",error:"",spinner:!1}),mounted(){let e=new google.maps.places.Autocomplete(document.getElementById("autocomplete"),{bounds:new google.maps.LatLngBounds(new google.maps.LatLng(-27.0266,-50.922))});e.addListener("place_changed",()=>{let t=e.getPlace();console.log(t),this.showUserLocationOnTheMap(t.geometry.location.lat(),t.geometry.location.lng())})},methods:{locatorButtonPressed(){this.spinner=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.getAddressFrom(e.coords.latitude,e.coords.longitude),this.showUserLocationOnTheMap(e.coords.latitude,e.coords.longitude)},e=>{this.error="Não conseguimos encontrar sua localização",this.spinner=!1}):(this.error=error.message,this.spinner=!1,console.log("Seu Navegador não tem suporte de Geolocalização do Google"))},getAddressFrom(e,t){l.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyBeYsZgDRvl1Gnn-Kbq4A1L8-Qpfb2z--w").then(e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):this.address=e.data.results[0].formatted_address,this.spinner=!1}).catch(e=>{this.error=e.message,console.log(e.message)})},showUserLocationOnTheMap(e,t){let s=new google.maps.Map(document.getElementById("map"),{zoom:15,center:new google.maps.LatLng(e,t),mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:new google.maps.LatLng(e,t),map:s})}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",{staticClass:"ui two column centered grid",staticStyle:{position:"relative","z-index":"1"}},[s("div",{staticClass:"column"},[s("form",{staticClass:"ui segment large form"},[s("img",{attrs:{src:"https://i.imgur.com/18MKrkz.png",alt:"",height:"80px",srcset:""}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"ui message red"},[e._v(e._s(e.error))]),e._v(" "),s("div",{staticClass:"ui segment"},[s("div",{staticClass:"field"},[s("div",{staticClass:"ui right icon input large",class:{loading:e.spinner}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],attrs:{type:"text",placeholder:"Seu Endereço",id:"autocomplete"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),e._v(" "),s("i",{staticClass:"dot circle link icon",on:{click:e.locatorButtonPressed}})])]),e._v(" "),s("button",{staticClass:"ui button"},[e._v("Processar")]),e._v(" "),s("button",{staticClass:"ui button green"},[e._v("Enviar XML")])])])])]),e._v(" "),s("section",{attrs:{id:"map"}})])},staticRenderFns:[]};var p=s("VU/8")(c,d,!1,function(e){s("YbpF")},null,null).exports,g={data:()=>({address:"",error:"",spinner:!1,apiKey:"AIzaSyBeYsZgDRvl1Gnn-Kbq4A1L8-Qpfb2z--w",lat:0,lng:0,type:"",radius:"",place:[]}),mounted(){const e=new google.maps.places.Autocomplete(this.$refs.autocomplete,{bounds:new google.maps.LatLngBounds(new google.maps.LatLng(-27.0266,-50.922))});e.addListener("place_changed",()=>{const t=e.getPlace();this.address=t.formatted_address,this.lat=t.geometry.location.lat(),this.lng=t.geometry.location.lng()})},methods:{locatorButtonPressed(){this.spinner=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude,this.getAddressFrom(e.coords.latitude,e.coords.longitude)},e=>{this.error="Não conseguimos encontrar sua localização",this.spinner=!1}):(this.error=error.message,this.spinner=!1,console.log("Seu Navegador não tem suporte de Geolocalização do Google"))},getAddressFrom(e,t){l.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key="+this.apiKey).then(e=>{e.data.error_message?(this.error=e.data.error_message,console.log(e.data.error_message)):this.address=e.data.results[0].formatted_address,this.spinner=!1}).catch(e=>{this.error=e.message,this.spinner=!1,console.log(e.message)})},findChronicMapButtonPressed(){const e=`https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${this.lat},${this.lng}&type=${this.type}&radius=${1e3*this.radius}&key=${this.apiKey}`;l.a.get(e).then(e=>{this.places=e.data.results,this.showPlacesOnMap(),console.log(e)}).catch(e=>{this.error=e.message})},showPlacesOnMap(){const e=new google.maps.Map(this.$refs.map,{zoom:15,center:new google.maps.LatLng(this.lat,this.lng),mapTypeId:google.maps.MapTypeId.ROADMAP}),t=new google.maps.InfoWindow;for(let s=0;s<this.places.length;s++){const a=this.places[s].geometry.location.lat,o=this.places[s].geometry.location.lng,r=this.places[s].place_id,i=new google.maps.Marker({position:new google.maps.LatLng(a,o),map:e});google.maps.event.addListener(i,"click",()=>{const s=`https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/details/json?key=${this.apiKey}&place_id=${r}`;l.a.get(s).then(s=>{if(s.data.error_message)this.error=s.data.error_message;else{const a=s.data.result;t.setContent(`<div class="ui header">Diabético</div>\n                  ${a.formatted_address} <br>\n                  \n                  \n                  `),t.open(e,i)}}).catch(e=>{this.error=e.message})})}},showInfoWindow(e){this.activeIndex=e,new google.maps.event.trigger(this.markers[e],"click")}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ui grid"},[s("div",{staticClass:"six wide column green"},[s("form",{staticClass:"ui segment large form"},[s("img",{attrs:{src:"https://i.imgur.com/18MKrkz.png",alt:"",height:"80px",srcset:""}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"ui message red"},[e._v(e._s(e.error))]),e._v(" "),s("div",{staticClass:"ui segment"},[s("div",{staticClass:"field"},[s("div",{staticClass:"ui right icon input large",class:{loading:e.spinner}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],attrs:{type:"text",placeholder:"Seu Endereço",id:"autocomplete"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),e._v(" "),s("i",{staticClass:"dot circle link icon",on:{click:e.locatorButtonPressed}})])]),e._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.type=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"diabeticos"}},[e._v("Diabeticos")])])]),e._v(" "),s("div",{staticClass:"field"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.radius,expression:"radius"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.radius=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"5"}},[e._v("5KM")]),e._v(" "),s("option",{attrs:{value:"10"}},[e._v("10KM")]),e._v(" "),s("option",{attrs:{value:"15"}},[e._v("15KM")]),e._v(" "),s("option",{attrs:{value:" 20"}},[e._v("20KM")])])])])]),e._v(" "),s("button",{staticClass:"ui button",on:{click:e.findChronicMapButtonPressed}},[e._v("\n          Procurar Doença ao Redor\n        ")])])]),e._v(" "),s("div",{staticClass:"ui segment",staticStyle:{"max-height":"300px",overflow:"auto"}},[s("div",{staticClass:"ui divided items"},e._l(e.places,function(t){return s("div",{key:t.id,staticClass:"item"},[s("div",{staticClass:"content"},[s("div",{staticClass:"header"},[e._v("Diabético")]),e._v(" "),s("div",{staticClass:"meta"},[e._v(e._s(t.vicinity))])])])}),0)])]),e._v(" "),s("div",{ref:"map",staticClass:"ten wide column"})])},staticRenderFns:[]};var u=s("VU/8")(g,m,!1,function(e){s("Ue60")},null,null).exports;a.a.use(i.a);var v=new i.a({routes:[{path:"/",component:p},{path:"/chronic-map",component:u}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:v,components:{App:r},template:"<App/>"})},Pe99:function(e,t){},Ue60:function(e,t){},YbpF:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1b118211afa2437f1678.js.map